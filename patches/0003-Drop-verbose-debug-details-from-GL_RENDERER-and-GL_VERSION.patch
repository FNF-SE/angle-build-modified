From 76d151b7f1cfaaef3a1fa74913ff1bf501e3bb72 Mon Sep 17 00:00:00 2001
From: Homura <egzozu.be.bas@gmail.com>
Date: Tue, 3 Feb 2026 16:42:03 +0300
Subject: [PATCH 3/3] Drop verbose debug details from `GL_RENDERER` and
 `GL_VERSION`.

---
 src/libANGLE/Context.cpp                      | 16 ++------------
 src/libANGLE/renderer/cl/CLPlatformCL.cpp     |  2 +-
 .../renderer/d3d/d3d11/Renderer11.cpp         |  9 --------
 src/libANGLE/renderer/d3d/d3d9/Renderer9.cpp  | 13 ------------
 src/libANGLE/renderer/gl/DisplayGL.cpp        | 10 +++++----
 src/libANGLE/renderer/metal/DisplayMtl.mm     |  5 +++--
 src/libANGLE/renderer/vulkan/CLPlatformVk.cpp |  3 +--
 src/libANGLE/renderer/vulkan/vk_renderer.cpp  | 21 -------------------
 src/libGLESv2/egl_stubs.cpp                   |  2 +-
 9 files changed, 14 insertions(+), 67 deletions(-)

diff --git a/src/libANGLE/Context.cpp b/src/libANGLE/Context.cpp
index a120b4d..0b77f81 100644
--- a/src/libANGLE/Context.cpp
+++ b/src/libANGLE/Context.cpp
@@ -3537,23 +3537,13 @@ void Context::initRendererString()
     }
     else
     {
-        std::string vendorString(mDisplay->getBackendVendorString());
         std::string rendererString(mDisplay->getBackendRendererDescription());
-        std::string versionString(mDisplay->getBackendVersionString(!isWebGL()));
         // Commas are used as a separator in ANGLE's renderer string, so remove commas from each
         // element.
-        vendorString.erase(std::remove(vendorString.begin(), vendorString.end(), ','),
-                           vendorString.end());
         rendererString.erase(std::remove(rendererString.begin(), rendererString.end(), ','),
                              rendererString.end());
-        versionString.erase(std::remove(versionString.begin(), versionString.end(), ','),
-                            versionString.end());
         frontendRendererString << "ANGLE (";
-        frontendRendererString << vendorString;
-        frontendRendererString << ", ";
         frontendRendererString << rendererString;
-        frontendRendererString << ", ";
-        frontendRendererString << versionString;
         frontendRendererString << ")";
     }
 
@@ -3601,8 +3591,7 @@ void Context::initVersionStrings()
     else
     {
         versionString << "OpenGL ES ";
-        versionString << clientVersion.getMajor() << "." << clientVersion.getMinor() << " (ANGLE "
-                      << angle::GetANGLEVersionString() << ")";
+        versionString << clientVersion.getMajor() << "." << clientVersion.getMinor() << " (ANGLE)";
     }
 
     mVersionString = MakeStaticString(versionString.str());
@@ -3610,8 +3599,7 @@ void Context::initVersionStrings()
     std::ostringstream shadingLanguageVersionString;
     shadingLanguageVersionString << "OpenGL ES GLSL ES ";
     shadingLanguageVersionString << (clientVersion.getMajor() == 2 ? 1 : clientVersion.getMajor())
-                                 << "." << clientVersion.getMinor() << "0 (ANGLE "
-                                 << angle::GetANGLEVersionString() << ")";
+                                 << "." << clientVersion.getMinor() << "0 (ANGLE)";
     mShadingLanguageString = MakeStaticString(shadingLanguageVersionString.str());
 }
 
diff --git a/src/libANGLE/renderer/cl/CLPlatformCL.cpp b/src/libANGLE/renderer/cl/CLPlatformCL.cpp
index 9e73a8a..6178f4a 100644
--- a/src/libANGLE/renderer/cl/CLPlatformCL.cpp
+++ b/src/libANGLE/renderer/cl/CLPlatformCL.cpp
@@ -170,7 +170,7 @@ CLPlatformImpl::Info CLPlatformCL::createInfo() const
     }
 
     // Customize version string and name
-    info.versionStr += std::string(" (ANGLE ") + angle::GetANGLEVersionString() + ")";
+    info.versionStr += std::string(" (ANGLE)");
     info.name.insert(0u, "ANGLE pass-through -> ");
 
     if (version >= CL_MAKE_VERSION(2, 1, 0) &&
diff --git a/src/libANGLE/renderer/d3d/d3d11/Renderer11.cpp b/src/libANGLE/renderer/d3d/d3d11/Renderer11.cpp
index b074753..c38155c 100644
--- a/src/libANGLE/renderer/d3d/d3d11/Renderer11.cpp
+++ b/src/libANGLE/renderer/d3d/d3d11/Renderer11.cpp
@@ -2337,15 +2337,6 @@ std::string Renderer11::getRendererDescription() const
     std::ostringstream rendererString;
 
     rendererString << mDescription;
-    rendererString << " (" << gl::FmtHex(mAdapterDescription.DeviceId) << ")";
-    rendererString << " Direct3D11";
-    if (mD3d12Module)
-        rendererString << "on12";
-
-    rendererString << " vs_" << getMajorShaderModel() << "_" << getMinorShaderModel()
-                   << getShaderModelSuffix();
-    rendererString << " ps_" << getMajorShaderModel() << "_" << getMinorShaderModel()
-                   << getShaderModelSuffix();
 
     return rendererString.str();
 }
diff --git a/src/libANGLE/renderer/d3d/d3d9/Renderer9.cpp b/src/libANGLE/renderer/d3d/d3d9/Renderer9.cpp
index c81d071..ff36fc3 100644
--- a/src/libANGLE/renderer/d3d/d3d9/Renderer9.cpp
+++ b/src/libANGLE/renderer/d3d/d3d9/Renderer9.cpp
@@ -2423,19 +2423,6 @@ std::string Renderer9::getRendererDescription() const
     std::ostringstream rendererString;
 
     rendererString << mAdapterIdentifier.Description;
-    if (getShareHandleSupport())
-    {
-        rendererString << " Direct3D9Ex";
-    }
-    else
-    {
-        rendererString << " Direct3D9";
-    }
-
-    rendererString << " vs_" << D3DSHADER_VERSION_MAJOR(mDeviceCaps.VertexShaderVersion) << "_"
-                   << D3DSHADER_VERSION_MINOR(mDeviceCaps.VertexShaderVersion);
-    rendererString << " ps_" << D3DSHADER_VERSION_MAJOR(mDeviceCaps.PixelShaderVersion) << "_"
-                   << D3DSHADER_VERSION_MINOR(mDeviceCaps.PixelShaderVersion);
 
     return rendererString.str();
 }
diff --git a/src/libANGLE/renderer/gl/DisplayGL.cpp b/src/libANGLE/renderer/gl/DisplayGL.cpp
index e8aa88e..e330228 100644
--- a/src/libANGLE/renderer/gl/DisplayGL.cpp
+++ b/src/libANGLE/renderer/gl/DisplayGL.cpp
@@ -177,13 +177,15 @@ egl::Error DisplayGL::makeCurrentSurfaceless(gl::Context *context)
 
 std::string DisplayGL::getRendererDescription()
 {
-    std::string rendererString        = GetRendererString(getRenderer()->getFunctions());
-    const angle::FeaturesGL &features = getRenderer()->getFeatures();
+    std::string rendererString = GetRendererString(getRenderer()->getFunctions());
 
-    if (features.sanitizeAMDGPURendererString.enabled)
+    // Find the first semicolon and extract only the part before it.
+    size_t semicolonPos = rendererString.find(';');
+    if (semicolonPos != std::string::npos)
     {
-        return SanitizeRendererString(rendererString);
+        return rendererString.substr(0, semicolonPos);
     }
+
     return rendererString;
 }
 
diff --git a/src/libANGLE/renderer/metal/DisplayMtl.mm b/src/libANGLE/renderer/metal/DisplayMtl.mm
index 4132c42..632db3b 100644
--- a/src/libANGLE/renderer/metal/DisplayMtl.mm
+++ b/src/libANGLE/renderer/metal/DisplayMtl.mm
@@ -192,12 +192,13 @@ std::string DisplayMtl::getRendererDescription()
 {
     ANGLE_MTL_OBJC_SCOPE
     {
-        std::string desc = "ANGLE Metal Renderer";
+        std::string desc = "ANGLE";
 
         if (mMetalDevice)
         {
-            desc += ": ";
+            desc += " (";
             desc += mMetalDevice.get().name.UTF8String;
+            desc += ")";
         }
 
         return desc;
diff --git a/src/libANGLE/renderer/vulkan/CLPlatformVk.cpp b/src/libANGLE/renderer/vulkan/CLPlatformVk.cpp
index bfe30e8..db801fc 100644
--- a/src/libANGLE/renderer/vulkan/CLPlatformVk.cpp
+++ b/src/libANGLE/renderer/vulkan/CLPlatformVk.cpp
@@ -216,8 +216,7 @@ const std::string &CLPlatformVk::GetVersionString()
 {
     static const angle::base::NoDestructor<const std::string> sVersion(
         "OpenCL " + std::to_string(CL_VERSION_MAJOR(GetVersion())) + "." +
-        std::to_string(CL_VERSION_MINOR(GetVersion())) + " ANGLE " +
-        angle::GetANGLEVersionString());
+        std::to_string(CL_VERSION_MINOR(GetVersion())) + " (ANGLE)");
     return *sVersion;
 }
 
diff --git a/src/libANGLE/renderer/vulkan/vk_renderer.cpp b/src/libANGLE/renderer/vulkan/vk_renderer.cpp
index 893982c..87abbaa 100644
--- a/src/libANGLE/renderer/vulkan/vk_renderer.cpp
+++ b/src/libANGLE/renderer/vulkan/vk_renderer.cpp
@@ -4926,28 +4926,7 @@ std::string Renderer::getRendererDescription() const
 {
     std::stringstream strstr;
 
-    uint32_t apiVersion = mPhysicalDeviceProperties.apiVersion;
-
-    strstr << "Vulkan ";
-    strstr << VK_API_VERSION_MAJOR(apiVersion) << ".";
-    strstr << VK_API_VERSION_MINOR(apiVersion) << ".";
-    strstr << VK_API_VERSION_PATCH(apiVersion);
-
-    strstr << " (";
-
-    // In the case of NVIDIA, deviceName does not necessarily contain "NVIDIA". Add "NVIDIA" so that
-    // Vulkan end2end tests can be selectively disabled on NVIDIA. TODO(jmadill): should not be
-    // needed after http://anglebug.com/40096421 is fixed and end2end_tests use more sophisticated
-    // driver detection.
-    if (mPhysicalDeviceProperties.vendorID == VENDOR_ID_NVIDIA)
-    {
-        strstr << GetVendorString(mPhysicalDeviceProperties.vendorID) << " ";
-    }
-
     strstr << mPhysicalDeviceProperties.deviceName;
-    strstr << " (" << gl::FmtHex(mPhysicalDeviceProperties.deviceID) << ")";
-
-    strstr << ")";
 
     return strstr.str();
 }
diff --git a/src/libGLESv2/egl_stubs.cpp b/src/libGLESv2/egl_stubs.cpp
index 8edb333..69bd150 100644
--- a/src/libGLESv2/egl_stubs.cpp
+++ b/src/libGLESv2/egl_stubs.cpp
@@ -600,7 +600,7 @@ const char *QueryString(Thread *thread, Display *display, EGLint name)
         case EGL_VERSION:
         {
             static const char *sVersionString =
-                MakeStaticString(std::string("1.5 (ANGLE ") + angle::GetANGLEVersionString() + ")");
+                MakeStaticString(std::string("1.5 (ANGLE)"));
             result = sVersionString;
             break;
         }
-- 
2.53.0

